<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://kit.fontawesome.com/489a3753bf.js"></script>
  <link rel="stylesheet" href="../css/style.css">
  <script src="../js/apiRequest.js"></script>
  <title>記事タイトル｜POP TIMES</title>
</head>

<body class="page">
  <header class="header">
    <h1><a href="index.html">POP TIMES</a></h1>
  </header>
  <main class="main">
    <div class="container">
      <section class="entry">
        <img class="entry__thumb" src="https://via.placeholder.com/800x400" alt="記事タイトル">
        <ul class="entry__images">
          <li><img src="https://via.placeholder.com/400x400" alt="記事タイトル"></li>
          <li><img src="https://via.placeholder.com/600x400" alt="記事タイトル"></li>
          <li><img src="https://via.placeholder.com/800x400" alt="記事タイトル"></li>
          <li><img src="https://via.placeholder.com/600x300" alt="記事タイトル"></li>
        </ul>
        <div class="entry__info">
          <h1 class="entry__title" data-subtitle="サブタイトル">記事タイトル</h1>
          <p class="entry__desc">こんな内容だよ。こんな内容だよ。こんな内容だよ。</p>
        </div>
        <a class="entry__more" href="#">記事を読む</a>
      </section>
      <section class="comment">
        <h1>コメント一覧 <i class="fas fa-comment"></i></h1>
        <form action="">
          <div class="comment__form">
            <input type="text">
            <button>送信</button>
          </div>
        </form>
        <ul class="comment__list">
          <li>
            <div class="comment__user"><i class="fas fa-user"></i> ユーザーネーム</div>
            <p>
              私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。
            </p>
          </li>
          <li>
            <div class="comment__user"><i class="fas fa-user"></i> ユーザーネーム</div>
            <p>
              私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。
            </p>
          </li>
          <li>
            <div class="comment__user"><i class="fas fa-user"></i> ユーザーネーム</div>
            <p>
              私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。
            </p>
          </li>
          <li>
            <div class="comment__user"><i class="fas fa-user"></i> ユーザーネーム</div>
            <p>
              私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。
            </p>
          </li>
          <li>
            <div class="comment__user"><i class="fas fa-user"></i> ユーザーネーム</div>
            <p>
              私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。
            </p>
          </li>
          <li>
            <div class="comment__user"><i class="fas fa-user"></i> ユーザーネーム</div>
            <p>
              私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。私はこんなことを思いました。
            </p>
          </li>
        </ul>
      </section>
    </div>
  </main>
  <footer class="footer">
    <div class="container">
      <small class="copyright">&copy; POP TIMES</small>
    </div>
  </footer>
  <script>
    const baseUrl = 'https://9b199e13.prtimes.tech/';
    const company_id = '36952';
    const release_id = '8';
    const url = `${baseUrl}detail/${company_id}/${release_id}`;

    apiResponse('GET', url, null, function (response_data) {
      const mainImage = response_data['main_image'];
      const title = response_data['title'];
      const subtitle = response_data['subtitle'];
      const desc = response_data['desc'];
      let images = [];
      let i = 1;
      while (response_data[`image${i}`] !== '') {
        images.add(response_data[i]);
        i++;
      }

      createEntry(mainImage, images, title, subtitle, desc);
    });

    function createEntry(mainImage, images, title, subtitle, desc) {
      const entry = document.querySelector('section.entry');
      const entryInfo = document.querySelector('section.entry__info');
      const img = document.querySelector('img.entry__thumb');
      const ul = document.querySelector('ul.entry__images');
      const h1 = document.querySelector('h1.title');
      h1.textContent = title;
      h1.dataset.subtitle = subtitle;
      img.src = mainImage;
      img.alt = title;
      images.forEach(el => {
        const li = document.createElement('li');
        const img = document.createElement('img');
        img.src = el;
        img.alt = title;
        ul.appendChild(li);
      });
      if (desc !== '') {
        const p = document.createElement('p');
        p.textContent = desc;
        p.classList.add('entry__desc');
        entryInfo.appendChild(p);
      }
    }
  </script>
</body>

</html>